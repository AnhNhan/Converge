CREATE TABLE OAuthInfo (id VARCHAR(255) NOT NULL, user_id VARCHAR(255) DEFAULT NULL, oauthProvider VARCHAR(255) NOT NULL, oauthUID VARCHAR(255) NOT NULL, accountURI VARCHAR(255) NOT NULL, accountName VARCHAR(255) NOT NULL, token VARCHAR(255) NOT NULL, tokenExpires DATETIME NOT NULL, tokenScope VARCHAR(255) NOT NULL, tokenStatus VARCHAR(255) NOT NULL, createdAt DATETIME NOT NULL, modifiedAt DATETIME NOT NULL, INDEX IDX_CF4BD7A9A76ED395 (user_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Role (id VARCHAR(255) NOT NULL, name VARCHAR(255) NOT NULL, `label` VARCHAR(255) NOT NULL, description LONGTEXT DEFAULT NULL, UNIQUE INDEX UNIQ_F75B25545E237E06 (name), UNIQUE INDEX UNIQ_F75B2554EA750E8 (`label`), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE User (id VARCHAR(255) NOT NULL, username VARCHAR(255) NOT NULL, dispname VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, salt VARCHAR(255) NOT NULL, profileImagePath VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE user_role (user_id VARCHAR(255) NOT NULL, role_id VARCHAR(255) NOT NULL, INDEX IDX_2DE8C6A3A76ED395 (user_id), INDEX IDX_2DE8C6A3D60322AC (role_id), PRIMARY KEY(user_id, role_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE OAuthInfo ADD CONSTRAINT FK_CF4BD7A9A76ED395 FOREIGN KEY (user_id) REFERENCES User (id);
ALTER TABLE user_role ADD CONSTRAINT FK_2DE8C6A3A76ED395 FOREIGN KEY (user_id) REFERENCES User (id) ON DELETE CASCADE;
ALTER TABLE user_role ADD CONSTRAINT FK_2DE8C6A3D60322AC FOREIGN KEY (role_id) REFERENCES Role (id) ON DELETE CASCADE;
