
/* Table creation, generated by Doctrine2 */

CREATE TABLE Discussion (id VARCHAR(255) NOT NULL, `label` VARCHAR(255) NOT NULL, author VARCHAR(255) NOT NULL, rawText VARCHAR(255) NOT NULL, createdAt DATETIME NOT NULL, lastActivity DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE DiscussionTag (disq_id VARCHAR(255) NOT NULL, t_id VARCHAR(255) NOT NULL, INDEX IDX_F425ACB7399FA8DE (disq_id), PRIMARY KEY(disq_id, t_id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE DiscussionTransaction (id VARCHAR(255) NOT NULL, object_id VARCHAR(255) DEFAULT NULL, author VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, oldValue LONGTEXT NOT NULL, newValue LONGTEXT NOT NULL, metadata LONGTEXT NOT NULL, createdAt DATETIME NOT NULL, modifiedAt DATETIME NOT NULL, INDEX IDX_82A3CDBA232D562B (object_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE Post (id VARCHAR(255) NOT NULL, disq_id VARCHAR(255) DEFAULT NULL, author VARCHAR(255) NOT NULL, rawText LONGTEXT NOT NULL, createdAt DATETIME NOT NULL, modifiedAt DATETIME NOT NULL, INDEX IDX_FAB8C3B3399FA8DE (disq_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE PostDraft (id VARCHAR(255) NOT NULL, discussion_uid_id VARCHAR(255) DEFAULT NULL, author_uid VARCHAR(255) NOT NULL, rawText LONGTEXT NOT NULL, createdAt DATETIME NOT NULL, modifiedAt DATETIME NOT NULL, INDEX IDX_913C2C235370F43 (discussion_uid_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE PostTransaction (id VARCHAR(255) NOT NULL, object_id VARCHAR(255) DEFAULT NULL, author VARCHAR(255) NOT NULL, type VARCHAR(255) NOT NULL, oldValue LONGTEXT NOT NULL, newValue LONGTEXT NOT NULL, metadata LONGTEXT NOT NULL, createdAt DATETIME NOT NULL, modifiedAt DATETIME NOT NULL, INDEX IDX_3C5D4D21232D562B (object_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE DiscussionTag ADD CONSTRAINT FK_F425ACB7399FA8DE FOREIGN KEY (disq_id) REFERENCES Discussion (id);
ALTER TABLE DiscussionTransaction ADD CONSTRAINT FK_82A3CDBA232D562B FOREIGN KEY (object_id) REFERENCES Discussion (id);
ALTER TABLE Post ADD CONSTRAINT FK_FAB8C3B3399FA8DE FOREIGN KEY (disq_id) REFERENCES Discussion (id);
ALTER TABLE PostDraft ADD CONSTRAINT FK_913C2C235370F43 FOREIGN KEY (discussion_uid_id) REFERENCES Discussion (id);
ALTER TABLE PostTransaction ADD CONSTRAINT FK_3C5D4D21232D562B FOREIGN KEY (object_id) REFERENCES Post (id);
